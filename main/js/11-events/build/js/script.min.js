"use strict";var addStudentForm=document.querySelector(".add-student-form"),courseListWrapper=document.querySelector(".course-list tbody"),courseList=[],studentList=[],counter=1;function addStudent(e,t){var n=findIndexCourseById(t.dataset.courseId);-1!==n&&(courseList[n].studentList.push(e),renderUserToHtml(e,t))}function renderUserToHtml(e,t){var n=getStudentTemplate(e);t.closest("td").querySelector(".students-list").insertAdjacentHTML("beforeend",n)}function removeCourse(e){var t=findIndexCourseById(e.dataset.courseId);-1!==t&&(courseList.splice(t,1),removeDomElementCourse(e))}function removeDomElementCourse(e){e.closest(".inner-box").remove()}function findIndexCourseById(e){return courseList.findIndex(function(t){return console.log(t.id,e),t.id===+e})}function createCourse(e){var t=getCourseTemplate(e),n=document.createElement("tr");n.classList.add("inner-box"),n.innerHTML=t,courseListWrapper.append(n),courseList.push(e)}function createCourseObject(e){var t={id:counter++,studentList:[]};return e.forEach(function(e){t[e.getAttribute("name")]=e.value}),t}addStudentForm.addEventListener("submit",function(e){e.preventDefault();var t=this.querySelectorAll("input, select");validateElementForm(t)&&createCourse(createCourseObject(t))}),courseListWrapper.addEventListener("click",function(e){var t=e.target;t.classList.contains("remove-course")&&confirm("?")&&removeCourse(t),t.classList.contains("add-student")&&(e.preventDefault(),addStudent(prompt("User name","Petya Petya"),t))});var speakerList={1:"Speaker One",2:"Speaker Two",3:"Speaker Three"};function getStudentTemplate(e){return'<li class="students-list__item">\n    <span>'.concat(e,'</span>\n    <button type="button" class="btn btn-danger">Remove</button>\n</li>')}function getCourseTemplate(e){return'\n    <th scope="row">\n        <div class="event-date">\n            <p>'.concat(e["start-date"],"</p>\n            <p>Duration: ").concat(e.duration," days</p>\n            <p>Course Name: ").concat(e["course-name"],' </p>\n        </div>\n    </th>\n    <td>\n        <div class="event-img">\n            <img width="150" src="./images/avatar').concat(e.speakers,'.png" alt="" />\n        </div>\n        <h3>').concat(speakerList[e.speakers],'</h3>\n    </td>\n    <td>\n        <ul class="students-list"></ul>\n        <div class="primary-btn">\n            <a data-course-id="').concat(e.id,'" class="btn btn-primary add-student" href="#">Add Students</a>\n        </div>\n    </td>\n    <td class="align-middle">\n        <button data-course-id="').concat(e.id,'" type="button" class="btn btn-danger remove-course">Remove Course</button>\n    </td>')}function clearErrorMessage(e){e.forEach(function(e){var t=e.parentElement.querySelector(".error");t&&t.remove()})}function validateElementForm(e){if(!e)return!1;var t=!0;return clearErrorMessage(e),e.forEach(function(e){e.classList.contains("reqaired")&&!e.value&&(showErrorMessage(e),t=!1)}),t}function showErrorMessage(e){if(e){var t=e.dataset.errorMessage,n=document.createElement("div");n.classList.add("error"),n.textContent=t,e.parentElement.append(n)}}